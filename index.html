<!DOCTYPE html>
<html lang="mn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>üëë ULTRA QR GENERATOR</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://unpkg.com/qr-code-styling@1.5.0/lib/qr-code-styling.js"></script>

<style>

body{
background:#eef1f6;
}

.card{
border-radius:22px;
}

#qrWrapper{
padding:30px;
border-radius:30px;
display:inline-block;
background:white;
position:relative;
overflow:hidden;
}

.glass{
background:rgba(255,255,255,.25) !important;
backdrop-filter:blur(18px);
}

.logo-preview{
width:80px;
border-radius:12px;
margin-top:10px;
}

</style>
</head>

<body>

<div class="container mt-5">

<div class="card shadow-lg p-4">

<h2 class="text-center text-primary mb-4">
üëë ULTRA QR GENERATOR
</h2>

<div class="row">

<!-- LEFT -->
<div class="col-md-5">

<label>QR —Ç”©—Ä”©–ª</label>
<select id="qrType" class="form-select mb-2">
<option value="url">Website</option>
<option value="wifi">WiFi</option>
<option value="email">Email</option>
<option value="phone">Phone</option>
<option value="sms">SMS</option>
<option value="vcard">vCard</option>
</select>

<div id="dynamicFields"></div>

<hr>

<label>QR Size (4K ready)</label>
<input type="range" min="300" max="2000" value="800"
id="size" class="form-range">

<label>Gradient</label><br>
<input type="color" id="c1" value="#0d6efd">
<input type="color" id="c2" value="#6610f2">

<hr>

<h5>üé® Style</h5>

<select id="style" class="form-select mb-2">
<option value="default">Default</option>
<option value="glass">Glass</option>
<option value="apple">Apple</option>
<option value="android">Android</option>
</select>

<hr>

<h5>üñº Logo</h5>

<input type="file"
id="logoInput"
accept="image/*"
class="form-control mb-2">

<button class="btn btn-outline-danger w-100 mb-2"
onclick="removeLogo()">
Remove Logo
</button>

<label>Logo size (auto safe ‚â§ 35%)</label>
<input type="range"
min="0.1"
max="0.35"
step="0.05"
value="0.25"
id="logoSize"
class="form-range">

<div class="form-check">
<input type="checkbox"
id="circle"
class="form-check-input">
<label class="form-check-label">
Circle crop
</label>
</div>

<div class="form-check">
<input type="checkbox"
id="shadow"
class="form-check-input">
<label class="form-check-label">
Shadow
</label>
</div>

<label>Border</label>
<input type="color"
id="borderColor"
value="#ffffff"
class="form-control mb-3">

<hr>

<h5>üåÑ Background Image</h5>

<input type="file"
id="bgImage"
accept="image/*"
class="form-control mb-3">

<button class="btn btn-success w-100"
onclick="downloadQR()">
‚¨áÔ∏è Download
</button>

</div>


<!-- RIGHT -->
<div class="col-md-7 text-center">

<div id="qrWrapper">
<div id="qrcode"></div>
</div>

</div>

</div>
</div>
</div>


<script>

let qr;
let logoImage=null;
let backgroundImage=null;

//////////////////////////////////////////////////
/////// QR FIELD BUILDER
//////////////////////////////////////////////////

function buildFields(){

const t=qrType.value;
let html="";

if(t==="url")
html=`<input id="data" class="form-control mb-2"
value="https://google.com">`;

if(t==="wifi")
html=`
<input id="ssid" class="form-control mb-2" placeholder="SSID">
<input id="pass" class="form-control mb-2" placeholder="Password">
`;

if(t==="email")
html=`
<input id="mail" class="form-control mb-2" placeholder="email@example.com">
`;

if(t==="phone")
html=`<input id="phone" class="form-control mb-2" placeholder="+976...">`;

if(t==="sms")
html=`
<input id="smsphone" class="form-control mb-2" placeholder="+976...">
<input id="smsmsg" class="form-control mb-2" placeholder="Message">
`;

if(t==="vcard")
html=`
<input id="name" class="form-control mb-2" placeholder="Name">
<input id="org" class="form-control mb-2" placeholder="Company">
<input id="tel" class="form-control mb-2" placeholder="Phone">
`;

dynamicFields.innerHTML=html;

setTimeout(()=>{
document.querySelectorAll("#dynamicFields input")
.forEach(el=>el.oninput=buildQR);
},100);

}

qrType.onchange=()=>{
buildFields();
buildQR();
};

//////////////////////////////////////////////////
/////// DATA BUILDER
//////////////////////////////////////////////////

function getQRData(){

const t=qrType.value;

if(t==="url") return data.value;

if(t==="wifi")
return `WIFI:T:WPA;S:${ssid.value};P:${pass.value};;`;

if(t==="email")
return `mailto:${mail.value}`;

if(t==="phone")
return `tel:${phone.value}`;

if(t==="sms")
return `SMSTO:${smsphone.value}:${smsmsg.value}`;

if(t==="vcard")
return `BEGIN:VCARD
VERSION:3.0
FN:${name.value}
ORG:${org.value}
TEL:${tel.value}
END:VCARD`;

}

//////////////////////////////////////////////////
/////// QR BUILDER
//////////////////////////////////////////////////

function buildQR(){

const qrData=getQRData();
if(!qrData) return;

const size=parseInt(size.value);

let dotType="rounded";

if(style.value==="apple") dotType="classy";
if(style.value==="android") dotType="dots";

const config={

width:size,
height:size,
type:"png",
data:qrData,

dotsOptions:{
type:dotType,
gradient:{
type:"linear",
rotation:Math.PI/4,
colorStops:[
{offset:0,color:c1.value},
{offset:1,color:c2.value}
]
}
},

backgroundOptions:{
color:"#ffffff"
},

qrOptions:{
errorCorrectionLevel:"H"
}

};

if(logoImage){

config.image=logoImage;

config.imageOptions={
imageSize:parseFloat(logoSize.value),
margin:6
};

}

qr=new QRCodeStyling(config);

qrcode.innerHTML="";
qr.append(qrcode);

applyWrapperStyles();

}

//////////////////////////////////////////////////
/////// WRAPPER STYLES
//////////////////////////////////////////////////

function applyWrapperStyles(){

qrWrapper.classList.remove("glass");

if(style.value==="glass")
qrWrapper.classList.add("glass");

if(backgroundImage){

qrWrapper.style.background=
`url(${backgroundImage}) center/cover`;

}else{
qrWrapper.style.background="white";
}

}

//////////////////////////////////////////////////
/////// LOGO HANDLERS
//////////////////////////////////////////////////

logoInput.onchange=e=>{

const file=e.target.files[0];
if(!file) return;

const reader=new FileReader();

reader.onload=x=>{
logoImage=x.target.result;
buildQR();
};

reader.readAsDataURL(file);
};

function removeLogo(){
logoImage=null;
logoInput.value="";
buildQR();
}

//////////////////////////////////////////////////
/////// BG IMAGE
//////////////////////////////////////////////////

bgImage.onchange=e=>{

const file=e.target.files[0];
if(!file) return;

const reader=new FileReader();

reader.onload=x=>{
backgroundImage=x.target.result;
buildQR();
};

reader.readAsDataURL(file);
};

//////////////////////////////////////////////////
/////// DOWNLOAD
//////////////////////////////////////////////////

function downloadQR(){

qr.getRawData("png")
.then(blob=>{

const a=document.createElement("a");
a.href=URL.createObjectURL(blob);
a.download="ULTRA_QR.png";
a.click();

});

}

//////////////////////////////////////////////////

size.oninput=buildQR;
logoSize.oninput=buildQR;
c1.onchange=buildQR;
c2.onchange=buildQR;
style.onchange=buildQR;
circle.onchange=buildQR;
shadow.onchange=buildQR;
borderColor.onchange=buildQR;

buildFields();
buildQR();

</script>

</body>
</html>
