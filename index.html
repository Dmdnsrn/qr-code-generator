<!DOCTYPE html>
<html lang="mn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>QR Code Generator</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    #qrcode canvas {
      border-radius: 15px;
    }

    .dark-mode {
      background-color: #121212;
      color: #ffffff;
    }

    .dark-mode .card {
      background-color: #1e1e1e;
      color: white;
    }

    .toggle-btn {
      position: fixed;
      top: 20px;
      right: 20px;
    }
  </style>
</head>
<body class="bg-light">
  <button class="btn btn-secondary toggle-btn" onclick="toggleTheme()">üåô / ‚òÄÔ∏è</button>

  <div class="container mt-5">
    <div class="card shadow-lg p-4">
      <h2 class="text-center text-primary">üìå QR Code “Æ“Ø—Å–≥—ç–≥—á</h2>
      <div class="mt-3">
        <label class="form-label">üìã QR –∫–æ–¥—ã–Ω —Ç”©—Ä”©–ª:</label>
        <select id="qrType" class="form-select" onchange="toggleFields(); generateQR();">
          <option value="website">Website</option>
          <option value="pdf">PDF</option>
          <option value="wifi">WiFi</option>
        </select>

        <div id="websiteFields" class="mt-2">
          <label class="form-label">üåê Website URL:</label>
          <input type="text" id="websiteInput" class="form-control" placeholder="https://example.com" oninput="generateQR()">
        </div>

        <div id="pdfFields" class="mt-2" style="display: none;">
          <label class="form-label">üìÑ PDF URL:</label>
          <input type="text" id="pdfInput" class="form-control" placeholder="https://example.com/file.pdf" oninput="generateQR()">
        </div>

        <div id="wifiFields" class="mt-2" style="display: none;">
          <label class="form-label">üåê –°“Ø–ª–∂—ç—ç–Ω–∏–π –Ω—ç—Ä (SSID):</label>
          <input type="text" id="ssidInput" class="form-control" placeholder="–ñ–∏—à—ç—ç: MyWiFi" oninput="generateQR()">
          <label class="form-label mt-2">üîí –•–∞–º–≥–∞–∞–ª–∞–ª—Ç—ã–Ω —Ç”©—Ä”©–ª:</label>
          <select id="securityInput" class="form-select" onchange="generateQR()">
            <option value="WPA">WPA/WPA2</option>
            <option value="WEP">WEP</option>
            <option value="nopass">–ù—É—É—Ü “Ø–≥–≥“Ø–π</option>
          </select>
          <label class="form-label mt-2">üîë –ù—É—É—Ü “Ø–≥:</label>
          <input type="text" id="passwordInput" class="form-control" placeholder="–ù—É—É—Ü “Ø–≥ (—Ö—ç—Ä–≤—ç—ç –±–∞–π–≥–∞–∞ –±–æ–ª)" oninput="generateQR()">
        </div>

        <div class="mt-3 row">
          <div class="col-md-6">
            <label class="form-label">üé® Dot ”©–Ω–≥”©:</label>
            <input type="color" id="dotColorInput" class="form-control form-control-color" value="#0d6efd" onchange="updateColors()">
          </div>
          <div class="col-md-6">
            <label class="form-label">üî≤ Corner ”©–Ω–≥”©:</label>
            <input type="color" id="cornerColorInput" class="form-control form-control-color" value="#0d6efd" onchange="updateColors()">
          </div>
        </div>

        <div class="mt-3">
          <label class="form-label">üìè –•—ç–º–∂—ç—ç (px):</label>
          <input type="range" id="sizeInput" class="form-range" min="150" max="500" value="300" oninput="generateQR()">
        </div>

        <label class="form-label mt-3">üñº –õ–æ–≥–æ (—Å–æ–Ω–≥–æ–ª—Ç–æ–æ—Ä):</label>
        <input type="file" id="logoInput" accept="image/*" class="form-control" onchange="generateQR()">

        <button onclick="generateQR()" class="btn btn-success mt-3 w-100">‚úÖ “Æ“Ø—Å–≥—ç—Ö</button>
      </div>

      <div id="qrResult" class="text-center mt-4" style="display: none;">
        <h5>‚úÖ –¢–∞–Ω—ã QR –∫–æ–¥:</h5>
        <div id="qrcode" class="mx-auto"></div>
        <a id="downloadLink" href="#" download="qr_code.png" class="btn btn-primary mt-3">‚¨áÔ∏è –¢–∞—Ç–∞—Ö</a>
      </div>

      <p id="error" class="text-danger text-center mt-3" style="display: none;"></p>
    </div>
  </div>

  <script src="https://unpkg.com/qr-code-styling@1.5.0/lib/qr-code-styling.js"></script>
  <script>
    let qrCode;

    function toggleFields() {
      const type = document.getElementById("qrType").value;
      document.getElementById("websiteFields").style.display = type === "website" ? "block" : "none";
      document.getElementById("pdfFields").style.display = type === "pdf" ? "block" : "none";
      document.getElementById("wifiFields").style.display = type === "wifi" ? "block" : "none";
    }

    function generateQR() {
      const type = document.getElementById("qrType").value;
      const error = document.getElementById("error");
      const result = document.getElementById("qrResult");
      const qrcodeDiv = document.getElementById("qrcode");
      let data = "";

      if (type === "website") {
        data = document.getElementById("websiteInput").value;
        if (!data) return showError("Website URL –æ—Ä—É—É–ª–Ω–∞ —É—É!");
      } else if (type === "pdf") {
        data = document.getElementById("pdfInput").value;
        if (!data) return showError("PDF URL –æ—Ä—É—É–ª–Ω–∞ —É—É!");
      } else if (type === "wifi") {
        const ssid = document.getElementById("ssidInput").value;
        const security = document.getElementById("securityInput").value;
        const password = document.getElementById("passwordInput").value;
        if (!ssid) return showError("–°“Ø–ª–∂—ç—ç–Ω–∏–π –Ω—ç—Ä –æ—Ä—É—É–ª–Ω–∞ —É—É!");
        data = `WIFI:S:${ssid};T:${security};P:${password};;`;
      }

      error.style.display = "none";
      result.style.display = "none";
      qrcodeDiv.innerHTML = "";

      const fileInput = document.getElementById("logoInput");
      const imageFile = fileInput.files[0];
      const dotColor = document.getElementById("dotColorInput").value;
      const cornerColor = document.getElementById("cornerColorInput").value;
      const size = parseInt(document.getElementById("sizeInput").value);

      const config = {
        width: size,
        height: size,
        type: "canvas",
        data: data,
        image: undefined,
        margin: 10,
        qrOptions: { errorCorrectionLevel: "H" },
        dotsOptions: { type: "rounded", color: dotColor },
        backgroundOptions: { color: "#ffffff" },
        imageOptions: {
          crossOrigin: "anonymous",
          hideBackgroundDots: true,
          imageSize: 0.4,
          margin: 5
        },
        cornersSquareOptions: { type: "extra-rounded", color: cornerColor },
        cornersDotOptions: { type: "dot", color: cornerColor }
      };

      if (imageFile) {
        const reader = new FileReader();
        reader.onload = function (e) {
          config.image = e.target.result;
          buildQR(config);
        };
        reader.readAsDataURL(imageFile);
      } else {
        buildQR(config);
      }
    }

    function buildQR(config) {
      qrCode = new QRCodeStyling(config);
      const qrcodeDiv = document.getElementById("qrcode");
      qrcodeDiv.innerHTML = "";
      qrCode.append(qrcodeDiv);

      qrCode.getRawData("png").then(blob => {
        document.getElementById("downloadLink").href = URL.createObjectURL(blob);
        document.getElementById("qrResult").style.display = "block";
      }).catch(() => {
        showError("QR –∫–æ–¥ “Ø“Ø—Å–≥—ç—Ö—ç–¥ –∞–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞!");
      });
    }

    function updateColors() {
      if (!qrCode) return;

      const dotColor = document.getElementById("dotColorInput").value;
      const cornerColor = document.getElementById("cornerColorInput").value;

      qrCode.update({
        dotsOptions: { color: dotColor },
        cornersSquareOptions: { color: cornerColor },
        cornersDotOptions: { color: cornerColor }
      });
    }

    function showError(message) {
      const error = document.getElementById("error");
      error.textContent = message;
      error.style.display = "block";
      document.getElementById("qrResult").style.display = "none";
    }

    function toggleTheme() {
      document.body.classList.toggle("dark-mode");
    }

    toggleFields();
  </script>
</body>
</html>
