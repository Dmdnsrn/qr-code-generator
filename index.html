<!DOCTYPE html>
<html lang="mn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>ULTRA QR GENERATOR</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://unpkg.com/qr-code-styling@1.5.0/lib/qr-code-styling.js"></script>

<style>

body{
background:#f4f6fb;
}

.card{
border-radius:20px;
}

#qrWrapper{
padding:25px;
border-radius:25px;
background:white;
display:inline-block;
}

.glass{
background:rgba(255,255,255,.2)!important;
backdrop-filter:blur(15px);
}

</style>
</head>

<body>

<div class="container mt-5">

<div class="card shadow-lg p-4">

<h3 class="text-center mb-4">ðŸ”¥ ULTRA QR GENERATOR</h3>

<div class="row">

<!-- LEFT -->
<div class="col-md-5">

<label>QR Ñ‚Ó©Ñ€Ó©Ð»</label>
<select id="qrType" class="form-select mb-2"></select>

<div id="fields"></div>

<hr>

<label>Size (4K ready)</label>
<input type="range" min="300" max="2000"
value="600" id="size"
class="form-range">

<label>Gradient</label><br>
<input type="color" id="c1" value="#0d6efd">
<input type="color" id="c2" value="#6610f2">

<hr>

<h5>Logo</h5>

<input type="file"
id="logoInput"
accept="image/*"
class="form-control mb-2">

<button class="btn btn-outline-danger w-100 mb-2"
id="removeLogo">
Remove Logo
</button>

<label>Logo size (safe â‰¤ 0.35)</label>
<input type="range"
min="0.1"
max="0.35"
step="0.05"
value="0.25"
id="logoSize"
class="form-range">

<hr>

<label>Style</label>
<select id="style" class="form-select">
<option value="default">Default</option>
<option value="glass">Glass</option>
<option value="dots">Android</option>
<option value="classy">Apple</option>
</select>

<button class="btn btn-primary w-100 mt-3"
id="downloadBtn">
Download QR
</button>

</div>


<!-- RIGHT -->
<div class="col-md-7 text-center">

<div id="qrWrapper">
<div id="qrcode"></div>
</div>

</div>

</div>
</div>
</div>


<script>

let qr=null;
let logoImage=null;

//////////////////////////////////////////////////
//// TYPES
//////////////////////////////////////////////////

const types={
url:`<input id="data"
class="form-control mb-2"
value="https://google.com">`,

wifi:`
<input id="ssid"
class="form-control mb-2"
placeholder="WiFi Ð½ÑÑ€">

<input id="pass"
class="form-control mb-2"
placeholder="Password">
`,

email:`
<input id="mail"
class="form-control mb-2"
placeholder="email@example.com">
`
};

const qrType=document.getElementById("qrType");
const fields=document.getElementById("fields");

Object.keys(types).forEach(t=>{
const o=document.createElement("option");
o.value=t;
o.textContent=t.toUpperCase();
qrType.appendChild(o);
});

//////////////////////////////////////////////////
//// BUILD FIELDS
//////////////////////////////////////////////////

function buildFields(){

fields.innerHTML=types[qrType.value];

setTimeout(()=>{
fields.querySelectorAll("input")
.forEach(el=>el.addEventListener("input",buildQR));
},50);

}

//////////////////////////////////////////////////
//// GET DATA
//////////////////////////////////////////////////

function getData(){

const t=qrType.value;

if(t==="url")
return document.getElementById("data")?.value;

if(t==="wifi"){

const ssid=document.getElementById("ssid")?.value;
if(!ssid) return "";

const pass=document.getElementById("pass")?.value;

return `WIFI:T:WPA;S:${ssid};P:${pass};;`;
}

if(t==="email"){

const m=document.getElementById("mail")?.value;
return m?`mailto:${m}`:"";
}

}

//////////////////////////////////////////////////
//// BUILD QR
//////////////////////////////////////////////////

function buildQR(){

const data=getData();
if(!data) return;

const size=parseInt(
document.getElementById("size").value
);

const style=document.getElementById("style").value;

const config={

width:size,
height:size,
type:"png",
data:data,

dotsOptions:{
type:style==="default"?"rounded":style,
gradient:{
type:"linear",
rotation:Math.PI/4,
colorStops:[
{offset:0,color:document.getElementById("c1").value},
{offset:1,color:document.getElementById("c2").value}
]
}
},

qrOptions:{
errorCorrectionLevel:"H"
},

backgroundOptions:{
color:"#ffffff"
}

};

if(logoImage){

config.image=logoImage;

config.imageOptions={
imageSize:parseFloat(
document.getElementById("logoSize").value
),
margin:6
};

}

qr=new QRCodeStyling(config);

document.getElementById("qrcode").innerHTML="";
qr.append(
document.getElementById("qrcode")
);

applyGlass();

}

//////////////////////////////////////////////////
//// GLASS
//////////////////////////////////////////////////

function applyGlass(){

const wrapper=
document.getElementById("qrWrapper");

if(
document.getElementById("style").value==="glass"
){
wrapper.classList.add("glass");
}else{
wrapper.classList.remove("glass");
}

}

//////////////////////////////////////////////////
//// LOGO
//////////////////////////////////////////////////

document
.getElementById("logoInput")
.addEventListener("change",e=>{

const file=e.target.files[0];
if(!file) return;

const reader=new FileReader();

reader.onload=x=>{
logoImage=x.target.result;
buildQR();
};

reader.readAsDataURL(file);

});

document
.getElementById("removeLogo")
.addEventListener("click",()=>{

logoImage=null;
document.getElementById("logoInput").value="";
buildQR();

});

//////////////////////////////////////////////////
//// DOWNLOAD
//////////////////////////////////////////////////

document
.getElementById("downloadBtn")
.addEventListener("click",()=>{

if(!qr) return;

qr.getRawData("png")
.then(blob=>{

const a=document.createElement("a");

a.href=URL.createObjectURL(blob);
a.download="QR.png";
a.click();

});

});

//////////////////////////////////////////////////
//// EVENTS
//////////////////////////////////////////////////

document
.getElementById("size")
.addEventListener("input",buildQR);

document
.getElementById("c1")
.addEventListener("change",buildQR);

document
.getElementById("c2")
.addEventListener("change",buildQR);

document
.getElementById("style")
.addEventListener("change",buildQR);

qrType.addEventListener("change",()=>{
buildFields();
setTimeout(buildQR,100);
});

//////////////////////////////////////////////////

buildFields();
setTimeout(buildQR,200);

</script>

</body>
</html>
