<!DOCTYPE html>
<html lang="mn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>QR Code Generator</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body {
  transition: background-color 0.3s, color 0.3s;
}
#qrcode canvas {
  border-radius: 20px;
  box-shadow: 0 0 15px rgba(0,0,0,0.1);
}
.dark-mode body,
.dark-mode .bg-light {
  background-color: #121212 !important;
  color: #e0e0e0;
}
.dark-mode .card {
  background-color: #1e1e1e !important;
  color: white;
}
.dark-mode .form-control,
.dark-mode .form-select {
  background-color: #1f1f1f;
  color: #fff;
  border-color: #444;
}
.dark-mode .form-range {
  filter: brightness(1.2);
}
.dark-mode .btn {
  background-color: #3f51b5;
  color: white;
}
.form-label { font-weight:600; }
.card { border-radius:16px; }
input[type="color"] { height:50px; }
select.form-select, input.form-control { border-radius:12px; }
.btn-success, .btn-primary { border-radius:12px; }
.toggle-btn { position:fixed; top:20px; right:20px; z-index:1000; }
@media (min-width:768px){
  .layout-flex { display:flex; justify-content:space-between; gap:30px; }
  .form-section { flex:1; }
  .qr-section { flex:1; text-align:center; }
}
</style>
</head>
<body class="bg-light">

<button class="btn btn-secondary toggle-btn shadow" onclick="toggleTheme()">ğŸŒ™ / â˜€ï¸</button>

<div class="container mt-5">
<div class="card shadow-lg p-4">
<h2 class="text-center text-primary mb-4">ğŸ“Œ QR Code Ò®Ò¯ÑĞ³ÑĞ³Ñ‡</h2>

<div class="layout-flex">
<!-- FORM SECTION -->
<div class="form-section">
  <div class="mb-3">
    <label class="form-label">ğŸ“‹ QR ĞºĞ¾Ğ´Ñ‹Ğ½ Ñ‚Ó©Ñ€Ó©Ğ»:</label>
    <select id="qrType" class="form-select" onchange="toggleFields(); generateQR();">
      <option value="website">ğŸŒ Website</option>
      <option value="pdf">ğŸ“„ PDF</option>
      <option value="wifi">ğŸ“¶ WiFi</option>
    </select>
  </div>

  <div id="websiteFields" class="mb-3">
    <label class="form-label">ğŸŒ Website URL:</label>
    <input type="text" id="websiteInput" class="form-control" placeholder="https://example.com" oninput="generateQR()">
  </div>
  <div id="pdfFields" class="mb-3" style="display:none;">
    <label class="form-label">ğŸ“„ PDF URL:</label>
    <input type="text" id="pdfInput" class="form-control" placeholder="https://example.com/file.pdf" oninput="generateQR()">
  </div>
  <div id="wifiFields" class="mb-3" style="display:none;">
    <label class="form-label">ğŸŒ Ğ¡Ò¯Ğ»Ğ¶ÑÑĞ½Ğ¸Ğ¹ Ğ½ÑÑ€ (SSID):</label>
    <input type="text" id="ssidInput" class="form-control" placeholder="Ğ–Ğ¸ÑˆÑÑ: MyWiFi" oninput="generateQR()">
    <label class="form-label mt-2">ğŸ”’ Ğ¥Ğ°Ğ¼Ğ³Ğ°Ğ°Ğ»Ğ°Ğ»Ñ‚Ñ‹Ğ½ Ñ‚Ó©Ñ€Ó©Ğ»:</label>
    <select id="securityInput" class="form-select" onchange="generateQR()">
      <option value="WPA">WPA/WPA2</option>
      <option value="WEP">WEP</option>
      <option value="nopass">ĞÑƒÑƒÑ† Ò¯Ğ³Ğ³Ò¯Ğ¹</option>
    </select>
    <label class="form-label mt-2">ğŸ”‘ ĞÑƒÑƒÑ† Ò¯Ğ³:</label>
    <input type="text" id="passwordInput" class="form-control" placeholder="ĞÑƒÑƒÑ† Ò¯Ğ³ (Ñ…ÑÑ€Ğ²ÑÑ Ğ±Ğ°Ğ¹Ğ³Ğ°Ğ° Ğ±Ğ¾Ğ»)" oninput="generateQR()">
  </div>

  <div class="row g-3">
    <div class="col-md-4">
      <label class="form-label">ğŸ¨ Dot Ó©Ğ½Ğ³Ó©:</label>
      <input type="color" id="dotColorInput" class="form-control form-control-color w-100" value="#0d6efd" onchange="updateColors()">
    </div>
    <div class="col-md-4">
      <label class="form-label">ğŸ”² Corner Ó©Ğ½Ğ³Ó©:</label>
      <input type="color" id="cornerColorInput" class="form-control form-control-color w-100" value="#0d6efd" onchange="updateColors()">
    </div>
    <div class="col-md-4">
      <label class="form-label">ğŸ–Œï¸ Background Ó©Ğ½Ğ³Ó©:</label>
      <input type="color" id="bgColorInput" class="form-control form-control-color w-100" value="#ffffff" onchange="generateQR()">
    </div>
    <div class="col-md-12 form-check mt-2">
      <input type="checkbox" class="form-check-input" id="transparentBg" onchange="generateQR()">
      <label class="form-check-label">Transparent</label>
    </div>

    <div class="col-md-12">
      <label class="form-label">ğŸ“ Ğ¥ÑĞ¼Ğ¶ÑÑ (px):</label>
      <input type="range" id="sizeInput" class="form-range" min="150" max="500" value="300" oninput="generateQR()">
    </div>
    <div class="col-md-12">
      <label class="form-label">ğŸ–¼ Ğ›Ğ¾Ğ³Ğ¾ (ÑĞ¾Ğ½Ğ³Ğ¾Ğ»Ñ‚Ğ¾Ğ¾Ñ€):</label>
      <input type="file" id="logoInput" accept="image/*" class="form-control" onchange="generateQR()">
      <button id="removeLogoBtn" class="btn btn-outline-danger mt-2 w-100" style="display:none;" onclick="removeLogo()">ğŸ—‘ï¸ Ğ—ÑƒÑ€Ğ°Ğ³ ÑƒÑÑ‚Ğ³Ğ°Ñ…</button>
    </div>
  </div>

  <button onclick="generateQR()" class="btn btn-success mt-4 w-100">âœ… QR ĞºĞ¾Ğ´ Ò¯Ò¯ÑĞ³ÑÑ…</button>
</div>

<!-- QR SECTION -->
<div class="qr-section">
  <div id="qrResult" style="display:none;">
    <h5>âœ… Ğ¢Ğ°Ğ½Ñ‹ QR ĞºĞ¾Ğ´:</h5>
    <div id="qrcode" class="mx-auto mb-3"></div>
    <a id="downloadLink" href="#" download="qr_code.png" class="btn btn-primary">â¬‡ï¸ Ğ¢Ğ°Ñ‚Ğ°Ñ…</a>
  </div>
  <p id="error" class="text-danger mt-3" style="display:none;"></p>
</div>
</div>
</div>
</div>

<script src="https://unpkg.com/qr-code-styling@1.5.0/lib/qr-code-styling.js"></script>
<script>
let qrCode;

function toggleFields() {
  const type = document.getElementById("qrType").value;
  document.getElementById("websiteFields").style.display = type === "website" ? "block" : "none";
  document.getElementById("pdfFields").style.display = type === "pdf" ? "block" : "none";
  document.getElementById("wifiFields").style.display = type === "wifi" ? "block" : "none";
}

function generateQR() {
  const type = document.getElementById("qrType").value;
  const error = document.getElementById("error");
  const result = document.getElementById("qrResult");
  const qrcodeDiv = document.getElementById("qrcode");
  let data = "";

  if (type === "website") data = document.getElementById("websiteInput").value;
  else if (type === "pdf") data = document.getElementById("pdfInput").value;
  else if (type === "wifi") {
    const ssid = document.getElementById("ssidInput").value;
    const security = document.getElementById("securityInput").value;
    const password = document.getElementById("passwordInput").value;
    data = `WIFI:S:${ssid};T:${security};P:${password};;`;
  }

  if(!data){ showError("ĞœÑĞ´ÑÑĞ»ÑĞ» Ğ¾Ñ€ÑƒÑƒĞ»Ğ½Ğ° ÑƒÑƒ!"); return; }

  error.style.display = "none";
  result.style.display = "none";
  qrcodeDiv.innerHTML = "";

  const imageFile = document.getElementById("logoInput").files[0];
  const dotColor = document.getElementById("dotColorInput").value;
  const cornerColor = document.getElementById("cornerColorInput").value;
  const bgColor = document.getElementById("bgColorInput").value;
  const transparent = document.getElementById("transparentBg").checked;
  const size = parseInt(document.getElementById("sizeInput").value);

  const config = {
    width:size,
    height:size,
    type:"canvas",
    data:data,
    margin:10,
    qrOptions:{ errorCorrectionLevel:"H" },
    dotsOptions:{ type:"rounded", color: dotColor },
    backgroundOptions:{ color: transparent ? "transparent" : bgColor },
    cornersSquareOptions:{ type:"extra-rounded", color: cornerColor },
    cornersDotOptions:{ type:"dot", color: cornerColor },
    imageOptions:{
      crossOrigin:"anonymous",
      hideBackgroundDots:true,
      imageSize:0.4,
      margin:5
    }
  };

  function buildQRFinal(){
    qrCode = new QRCodeStyling(config);
    qrcodeDiv.innerHTML = "";
    qrCode.append(qrcodeDiv);
    qrCode.getRawData("png").then(blob=>{
      document.getElementById("downloadLink").href = URL.createObjectURL(blob);
      result.style.display="block";
    });
  }

  if(imageFile){
    const reader = new FileReader();
    reader.onload = e => { config.image = e.target.result; document.getElementById("removeLogoBtn").style.display="block"; buildQRFinal(); }
    reader.readAsDataURL(imageFile);
  } else { document.getElementById("removeLogoBtn").style.display="none"; buildQRFinal(); }
}

function updateColors(){ if(!qrCode) return;
  qrCode.update({
    dotsOptions:{ color: document.getElementById("dotColorInput").value },
    cornersSquareOptions:{ color: document.getElementById("cornerColorInput").value },
    cornersDotOptions:{ color: document.getElementById("cornerColorInput").value }
  });
}

function showError(msg){ const e=document.getElementById("error"); e.innerText=msg; e.style.display="block"; document.getElementById("qrResult").style.display="none"; }

function toggleTheme(){ document.body.classList.toggle("dark-mode"); document.documentElement.classList.toggle("dark-mode"); }

function removeLogo(){ document.getElementById("logoInput").value=""; document.getElementById("removeLogoBtn").style.display="none"; generateQR(); }

toggleFields();
</script>
</body>
</html>
